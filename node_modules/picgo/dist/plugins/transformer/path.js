"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const probe_image_size_1 = __importDefault(require("probe-image-size"));
const path_1 = __importDefault(require("path"));
const fs_extra_1 = __importDefault(require("fs-extra"));
const handle = async (ctx) => {
    let results = ctx.output;
    await Promise.all(ctx.input.map(async (item) => {
        let fileName = path_1.default.basename(item);
        let buffer = await fs_extra_1.default.readFile(item);
        // let base64Image = Buffer.from(buffer).toString('base64')
        let imgSize = probe_image_size_1.default.sync(buffer);
        results.push({
            buffer,
            // base64Image,
            fileName,
            width: imgSize.width,
            height: imgSize.height,
            extname: path_1.default.extname(item)
        });
    }));
    return ctx;
};
exports.default = {
    handle
};
